

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. Overview &mdash; rastercube 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="rastercube 1.0 documentation" href="index.html"/>
        <link rel="next" title="2. Examples" href="examples.html"/>
        <link rel="prev" title="rastercube documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> rastercube
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">1. Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#environment-variables">1.1. Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">1.2. Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#worldgrid">1.3. Worldgrid</a></li>
<li class="toctree-l2"><a class="reference internal" href="#date-management">1.4. Date management</a></li>
<li class="toctree-l2"><a class="reference internal" href="#input-data-files-structure">1.5. Input data files structure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">2. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">3. Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">4. API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">rastercube</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>1. Overview</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/overview.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

/* nice headers on first paragraph of info/warning boxes */
.admonition .first {
    margin: -12px;
    padding: 6px 12px;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1;
    display: block;
}
.admonition.warning .first {
    background: #f0b37e;
}
.admonition.note .first {
    background: #6ab0de;
}
.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="overview">
<h1>1. Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p><cite>rastercube</cite> is a python package to store large geographical raster collections
on the Hadoop File System (HDFS). The initial use case was to store and quickly
access MODIS NDVI timeseries for any pixel on the whole planet.</p>
<p>In addition, <cite>rastercube</cite> provides facility to process the data using Spark.</p>
<p>All the geographical computations are handled by <cite>gdal</cite>.</p>
<div class="section" id="environment-variables">
<span id="envvar"></span><h2>1.1. Environment variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h2>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>export RASTERCUBE_TEST_DATA=$HOME/rastercube_testdata
export RASTERCUBE_DATA=$TERRAI_DATA
export RASTERCUBE_WORLDGRID=$TERRAI_WORLDGRID
export RASTERCUBE_CONFIG=$TERRAI_DATA/1_manual/rastercube_config.py
</pre></div>
</div>
</div>
<div class="section" id="configuration">
<span id="id1"></span><h2>1.2. Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Rastercube&#8217;s configuration options are defined in the <code class="docutils literal"><span class="pre">rastercube.config</span></code>
module. To override options, create a <code class="docutils literal"><span class="pre">rastercube_config.py</span></code> file on your
file system and have the <code class="docutils literal"><span class="pre">$RASTERCUBE_CONFIG</span></code> environment variable point
to it. For example:</p>
<div class="highlight-python"><div class="highlight"><pre>export RASTERCUBE_CONFIG=$RASTERCUBE_DATA/1_manual/rastercube_config.py
</pre></div>
</div>
<p>With <code class="docutils literal"><span class="pre">rastercube_config.py</span></code> containing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">MODIS_HTTP_USER</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span>
<span class="n">MODIS_HTTP_PASS</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="worldgrid">
<h2>1.3. Worldgrid<a class="headerlink" href="#worldgrid" title="Permalink to this headline">¶</a></h2>
<p>A worldgrid is a (chunked) georeferenced nD (n &gt;= 2) array covering the whole
earth. The first two dimensions are spatial dimensions and the third dimension
is usually time.</p>
<p>The original use case for which the format was designed was to store MODIS
NDVI timeseries for the pantropical areas (south america, africa and asia).
MODIS NDVI images have a frequency of 8 days (if you use Terra and Aqua) and
a ground resolution of 250x250m.</p>
<p>In the case of MODIS NDVI, there is also a quality indicator. So you would
have two worldgrids : one containing NDVI and one containing quality. You could
imagine more worldgrids if you were interested in other MODIS bands. You can
also have worldgrid for other data types such as Global Land Cover data.</p>
<p>The rastercube package provides a simple API to store worldgrids on the Hadoop
File System</p>
</div>
<div class="section" id="date-management">
<h2>1.4. Date management<a class="headerlink" href="#date-management" title="Permalink to this headline">¶</a></h2>
<p>Geographical rasters are usually downloaded as timestamped tiles. When
creating a worldgrid, you want to ensure that you have the same dates available
for each tile so you have a homogeneous time axis for the whole grid.</p>
<p>This is done by collecting the available date for a particular model tile and
storing them in a .csv. See the <code class="docutils literal"><span class="pre">ndvi_collect_dates.py</span></code> script.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If a particular MODIS tile is missing a date (this can happen due to
satellite malfunction), you can just manually create a tile with all
bad QA/NDVI</p>
</div>
</div>
<div class="section" id="input-data-files-structure">
<h2>1.5. Input data files structure<a class="headerlink" href="#input-data-files-structure" title="Permalink to this headline">¶</a></h2>
<p>The input data (e.g. the MODIS HDF tiles, the GLCF tiles) that are imported
into worldgrid need to be stored on a traditional unix filesystem (or on NFS).</p>
<p>The environment variable <code class="docutils literal"><span class="pre">$RASTERCUBE_DATA</span></code> should point to the location
where the data is stored.</p>
<p>For example, here is the layout used in the terra-i project. <cite>rastercube</cite>
assumes that you have similar <code class="docutils literal"><span class="pre">0_input</span></code> and <code class="docutils literal"><span class="pre">1_manual</span></code> directories.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">0_input</span></code> should contain all input raster data</li>
<li><code class="docutils literal"><span class="pre">1_manual</span></code> should contain some manually created files like the NDVI dates
.csv</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre>/home/julien/terra_i/sv2454_data
├── 0_input
│   ├── glcf_5.1
│   ├── hansen_dets
│   ├── landsat8
│   ├── MODIS_HDF
│   ├── modis_www_mirror
│   ├── prm
│   ├── terrai_dets
│   └── TRMM_daily
├── 1_manual
│   ├── hansen_wms
│   ├── ndvi_dates.csv
│   ├── ndvi_dates.short.csv
│   ├── ndvi_dates.terra_aqua.csv
│   ├── ndvi_dates.terra_aqua.short.csv
│   ├── ndvi_dates.terra.csv
│   └── qgis
├── 2_intermediate
│   ├── logs
│   ├── models
│   ├── models_rawndvi
│   └── terrai_dets
├── experimental
│   ├── glcf_dets
│   ├── glcf_dets_2
│   ├── land_cover
│   ├── qgis
│   ├── test2.hdf
│   └── test.hdf
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="examples.html" class="btn btn-neutral float-right" title="2. Examples" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="rastercube documentation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, 2016 rastercube.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>